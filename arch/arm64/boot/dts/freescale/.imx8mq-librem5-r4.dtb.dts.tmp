# 0 "arch/arm64/boot/dts/freescale/imx8mq-librem5-r4.dts"
# 0 "<built-in>"
# 0 "<command-line>"
# 1 "arch/arm64/boot/dts/freescale/imx8mq-librem5-r4.dts"



/dts-v1/;

# 1 "arch/arm64/boot/dts/freescale/imx8mq-librem5-r3.dtsi" 1



/dts-v1/;






# 1 "arch/arm64/boot/dts/freescale/imx8mq-librem5.dtsi" 1





/dts-v1/;

# 1 "./scripts/dtc/include-prefixes/dt-bindings/input/input.h" 1
# 13 "./scripts/dtc/include-prefixes/dt-bindings/input/input.h"
# 1 "./scripts/dtc/include-prefixes/dt-bindings/input/linux-event-codes.h" 1
# 14 "./scripts/dtc/include-prefixes/dt-bindings/input/input.h" 2
# 9 "arch/arm64/boot/dts/freescale/imx8mq-librem5.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/interrupt-controller/irq.h" 1
# 10 "arch/arm64/boot/dts/freescale/imx8mq-librem5.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/leds/common.h" 1
# 11 "arch/arm64/boot/dts/freescale/imx8mq-librem5.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/pwm/pwm.h" 1
# 12 "arch/arm64/boot/dts/freescale/imx8mq-librem5.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/usb/pd.h" 1
# 13 "arch/arm64/boot/dts/freescale/imx8mq-librem5.dtsi" 2
# 1 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 1






# 1 "./scripts/dtc/include-prefixes/dt-bindings/clock/imx8mq-clock.h" 1
# 8 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/power/imx8mq-power.h" 1
# 9 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/reset/imx8mq-reset.h" 1
# 10 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/gpio/gpio.h" 1
# 11 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2

# 1 "./scripts/dtc/include-prefixes/dt-bindings/interrupt-controller/arm-gic.h" 1
# 13 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/thermal/thermal.h" 1
# 14 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2
# 1 "./scripts/dtc/include-prefixes/dt-bindings/interconnect/imx8mq.h" 1
# 15 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2
# 1 "arch/arm64/boot/dts/freescale/imx8mq-pinfunc.h" 1
# 16 "arch/arm64/boot/dts/freescale/imx8mq.dtsi" 2

/ {
 interrupt-parent = <&gpc>;

 #address-cells = <2>;
 #size-cells = <2>;

 aliases {
  ethernet0 = &fec1;
  gpio0 = &gpio1;
  gpio1 = &gpio2;
  gpio2 = &gpio3;
  gpio3 = &gpio4;
  gpio4 = &gpio5;
  i2c0 = &i2c1;
  i2c1 = &i2c2;
  i2c2 = &i2c3;
  i2c3 = &i2c4;
  mmc0 = &usdhc1;
  mmc1 = &usdhc2;
  serial0 = &uart1;
  serial1 = &uart2;
  serial2 = &uart3;
  serial3 = &uart4;
  spi0 = &ecspi1;
  spi1 = &ecspi2;
  spi2 = &ecspi3;
 };

 ckil: clock-ckil {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <32768>;
  clock-output-names = "ckil";
 };

 osc_25m: clock-osc-25m {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <25000000>;
  clock-output-names = "osc_25m";
 };

 osc_27m: clock-osc-27m {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <27000000>;
  clock-output-names = "osc_27m";
 };

 hdmi_phy_27m: clock-hdmi-phy-27m {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <27000000>;
  clock-output-names = "hdmi_phy_27m";
 };

 clk_ext1: clock-ext1 {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <133000000>;
  clock-output-names = "clk_ext1";
 };

 clk_ext2: clock-ext2 {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <133000000>;
  clock-output-names = "clk_ext2";
 };

 clk_ext3: clock-ext3 {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <133000000>;
  clock-output-names = "clk_ext3";
 };

 clk_ext4: clock-ext4 {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <133000000>;
  clock-output-names = "clk_ext4";
 };

 cpus {
  #address-cells = <1>;
  #size-cells = <0>;

  A53_0: cpu@0 {
   device_type = "cpu";
   compatible = "arm,cortex-a53";
   reg = <0x0>;
   clock-latency = <61036>;
   clocks = <&clk 258>;
   enable-method = "psci";
   i-cache-size = <0x8000>;
   i-cache-line-size = <64>;
   i-cache-sets = <256>;
   d-cache-size = <0x8000>;
   d-cache-line-size = <64>;
   d-cache-sets = <128>;
   next-level-cache = <&A53_L2>;
   operating-points-v2 = <&a53_opp_table>;
   #cooling-cells = <2>;
   nvmem-cells = <&cpu_speed_grade>;
   nvmem-cell-names = "speed_grade";
  };

  A53_1: cpu@1 {
   device_type = "cpu";
   compatible = "arm,cortex-a53";
   reg = <0x1>;
   clock-latency = <61036>;
   clocks = <&clk 258>;
   enable-method = "psci";
   i-cache-size = <0x8000>;
   i-cache-line-size = <64>;
   i-cache-sets = <256>;
   d-cache-size = <0x8000>;
   d-cache-line-size = <64>;
   d-cache-sets = <128>;
   next-level-cache = <&A53_L2>;
   operating-points-v2 = <&a53_opp_table>;
   #cooling-cells = <2>;
  };

  A53_2: cpu@2 {
   device_type = "cpu";
   compatible = "arm,cortex-a53";
   reg = <0x2>;
   clock-latency = <61036>;
   clocks = <&clk 258>;
   enable-method = "psci";
   i-cache-size = <0x8000>;
   i-cache-line-size = <64>;
   i-cache-sets = <256>;
   d-cache-size = <0x8000>;
   d-cache-line-size = <64>;
   d-cache-sets = <128>;
   next-level-cache = <&A53_L2>;
   operating-points-v2 = <&a53_opp_table>;
   #cooling-cells = <2>;
  };

  A53_3: cpu@3 {
   device_type = "cpu";
   compatible = "arm,cortex-a53";
   reg = <0x3>;
   clock-latency = <61036>;
   clocks = <&clk 258>;
   enable-method = "psci";
   i-cache-size = <0x8000>;
   i-cache-line-size = <64>;
   i-cache-sets = <256>;
   d-cache-size = <0x8000>;
   d-cache-line-size = <64>;
   d-cache-sets = <128>;
   next-level-cache = <&A53_L2>;
   operating-points-v2 = <&a53_opp_table>;
   #cooling-cells = <2>;
  };

  A53_L2: l2-cache0 {
   compatible = "cache";
   cache-level = <2>;
   cache-unified;
   cache-size = <0x100000>;
   cache-line-size = <64>;
   cache-sets = <1024>;
  };
 };

 a53_opp_table: opp-table {
  compatible = "operating-points-v2";
  opp-shared;

  opp-800000000 {
   opp-hz = /bits/ 64 <800000000>;
   opp-microvolt = <900000>;

   opp-supported-hw = <0xf>, <0x4>;
   clock-latency-ns = <150000>;
   opp-suspend;
  };

  opp-1000000000 {
   opp-hz = /bits/ 64 <1000000000>;
   opp-microvolt = <900000>;

   opp-supported-hw = <0xe>, <0x3>;
   clock-latency-ns = <150000>;
   opp-suspend;
  };

  opp-1300000000 {
   opp-hz = /bits/ 64 <1300000000>;
   opp-microvolt = <1000000>;
   opp-supported-hw = <0xc>, <0x4>;
   clock-latency-ns = <150000>;
   opp-suspend;
  };

  opp-1500000000 {
   opp-hz = /bits/ 64 <1500000000>;
   opp-microvolt = <1000000>;
   opp-supported-hw = <0x8>, <0x3>;
   clock-latency-ns = <150000>;
   opp-suspend;
  };
 };

 pmu {
  compatible = "arm,cortex-a53-pmu";
  interrupts = <1 7 4>;
  interrupt-parent = <&gic>;
 };

 psci {
  compatible = "arm,psci-1.0";
  method = "smc";
 };

 thermal-zones {
  cpu_thermal: cpu-thermal {
   polling-delay-passive = <250>;
   polling-delay = <2000>;
   thermal-sensors = <&tmu 0>;

   trips {
    cpu_alert: cpu-alert {
     temperature = <80000>;
     hysteresis = <2000>;
     type = "passive";
    };

    cpu-crit {
     temperature = <90000>;
     hysteresis = <2000>;
     type = "critical";
    };
   };

   cooling-maps {
    map0 {
     trip = <&cpu_alert>;
     cooling-device =
      <&A53_0 (~0) (~0)>,
      <&A53_1 (~0) (~0)>,
      <&A53_2 (~0) (~0)>,
      <&A53_3 (~0) (~0)>;
    };
   };
  };

  gpu-thermal {
   polling-delay-passive = <250>;
   polling-delay = <2000>;
   thermal-sensors = <&tmu 1>;

   trips {
    gpu_alert: gpu-alert {
     temperature = <80000>;
     hysteresis = <2000>;
     type = "passive";
    };

    gpu-crit {
     temperature = <90000>;
     hysteresis = <2000>;
     type = "critical";
    };
   };

   cooling-maps {
    map0 {
     trip = <&gpu_alert>;
     cooling-device =
      <&gpu (~0) (~0)>;
    };
   };
  };

  vpu-thermal {
   polling-delay-passive = <250>;
   polling-delay = <2000>;
   thermal-sensors = <&tmu 2>;

   trips {
    vpu-crit {
     temperature = <90000>;
     hysteresis = <2000>;
     type = "critical";
    };
   };
  };
 };

 timer {
  compatible = "arm,armv8-timer";
  interrupts = <1 13 8>,
               <1 14 8>,
               <1 11 8>,
               <1 10 8>;
  interrupt-parent = <&gic>;
  arm,no-tick-in-suspend;
 };

 soc: soc@0 {
  compatible = "fsl,imx8mq-soc", "simple-bus";
  #address-cells = <1>;
  #size-cells = <1>;
  ranges = <0x0 0x0 0x0 0x3e000000>;
  dma-ranges = <0x40000000 0x0 0x40000000 0xc0000000>;
  nvmem-cells = <&imx8mq_uid>;
  nvmem-cell-names = "soc_unique_id";

  aips1: bus@30000000 {
   compatible = "fsl,aips-bus", "simple-bus";
   reg = <0x30000000 0x400000>;
   #address-cells = <1>;
   #size-cells = <1>;
   ranges = <0x30000000 0x30000000 0x400000>;

   sai1: sai@30010000 {
    #sound-dai-cells = <0>;
    compatible = "fsl,imx8mq-sai";
    reg = <0x30010000 0x10000>;
    interrupts = <0 95 4>;
    clocks = <&clk 238>,
             <&clk 196>,
             <&clk 0>, <&clk 0>;
    clock-names = "bus", "mclk1", "mclk2", "mclk3";
    dmas = <&sdma2 8 24 0>, <&sdma1 9 24 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   sai6: sai@30030000 {
    #sound-dai-cells = <0>;
    compatible = "fsl,imx8mq-sai";
    reg = <0x30030000 0x10000>;
    interrupts = <0 90 4>;
    clocks = <&clk 243>,
             <&clk 201>,
             <&clk 0>, <&clk 0>;
    clock-names = "bus", "mclk1", "mclk2", "mclk3";
    dmas = <&sdma2 4 24 0>, <&sdma2 5 24 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   sai5: sai@30040000 {
    #sound-dai-cells = <0>;
    compatible = "fsl,imx8mq-sai";
    reg = <0x30040000 0x10000>;
    interrupts = <0 90 4>;
    clocks = <&clk 242>,
             <&clk 200>,
             <&clk 0>, <&clk 0>;
    clock-names = "bus", "mclk1", "mclk2", "mclk3";
    dmas = <&sdma2 2 24 0>, <&sdma2 3 24 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   sai4: sai@30050000 {
    #sound-dai-cells = <0>;
    compatible = "fsl,imx8mq-sai";
    reg = <0x30050000 0x10000>;
    interrupts = <0 100 4>;
    clocks = <&clk 241>,
             <&clk 199>,
             <&clk 0>, <&clk 0>;
    clock-names = "bus", "mclk1", "mclk2", "mclk3";
    dmas = <&sdma2 0 24 0>, <&sdma2 1 24 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   gpio1: gpio@30200000 {
    compatible = "fsl,imx8mq-gpio", "fsl,imx35-gpio";
    reg = <0x30200000 0x10000>;
    interrupts = <0 64 4>,
                 <0 65 4>;
    clocks = <&clk 259>;
    gpio-controller;
    #gpio-cells = <2>;
    interrupt-controller;
    #interrupt-cells = <2>;
    gpio-ranges = <&iomuxc 0 10 30>;
   };

   gpio2: gpio@30210000 {
    compatible = "fsl,imx8mq-gpio", "fsl,imx35-gpio";
    reg = <0x30210000 0x10000>;
    interrupts = <0 66 4>,
                 <0 67 4>;
    clocks = <&clk 260>;
    gpio-controller;
    #gpio-cells = <2>;
    interrupt-controller;
    #interrupt-cells = <2>;
    gpio-ranges = <&iomuxc 0 40 21>;
   };

   gpio3: gpio@30220000 {
    compatible = "fsl,imx8mq-gpio", "fsl,imx35-gpio";
    reg = <0x30220000 0x10000>;
    interrupts = <0 68 4>,
                 <0 69 4>;
    clocks = <&clk 261>;
    gpio-controller;
    #gpio-cells = <2>;
    interrupt-controller;
    #interrupt-cells = <2>;
    gpio-ranges = <&iomuxc 0 61 26>;
   };

   gpio4: gpio@30230000 {
    compatible = "fsl,imx8mq-gpio", "fsl,imx35-gpio";
    reg = <0x30230000 0x10000>;
    interrupts = <0 70 4>,
                 <0 71 4>;
    clocks = <&clk 262>;
    gpio-controller;
    #gpio-cells = <2>;
    interrupt-controller;
    #interrupt-cells = <2>;
    gpio-ranges = <&iomuxc 0 87 32>;
   };

   gpio5: gpio@30240000 {
    compatible = "fsl,imx8mq-gpio", "fsl,imx35-gpio";
    reg = <0x30240000 0x10000>;
    interrupts = <0 72 4>,
                 <0 73 4>;
    clocks = <&clk 263>;
    gpio-controller;
    #gpio-cells = <2>;
    interrupt-controller;
    #interrupt-cells = <2>;
    gpio-ranges = <&iomuxc 0 119 30>;
   };

   tmu: tmu@30260000 {
    compatible = "fsl,imx8mq-tmu";
    reg = <0x30260000 0x10000>;
    interrupts = <0 49 4>;
    clocks = <&clk 246>;
    little-endian;
    fsl,tmu-range = <0xb0000 0xa0026 0x80048 0x70061>;
    fsl,tmu-calibration = <0x00000000 0x00000023>,
            <0x00000001 0x00000029>,
            <0x00000002 0x0000002f>,
            <0x00000003 0x00000035>,
            <0x00000004 0x0000003d>,
            <0x00000005 0x00000043>,
            <0x00000006 0x0000004b>,
            <0x00000007 0x00000051>,
            <0x00000008 0x00000057>,
            <0x00000009 0x0000005f>,
            <0x0000000a 0x00000067>,
            <0x0000000b 0x0000006f>,

            <0x00010000 0x0000001b>,
            <0x00010001 0x00000023>,
            <0x00010002 0x0000002b>,
            <0x00010003 0x00000033>,
            <0x00010004 0x0000003b>,
            <0x00010005 0x00000043>,
            <0x00010006 0x0000004b>,
            <0x00010007 0x00000055>,
            <0x00010008 0x0000005d>,
            <0x00010009 0x00000067>,
            <0x0001000a 0x00000070>,

            <0x00020000 0x00000017>,
            <0x00020001 0x00000023>,
            <0x00020002 0x0000002d>,
            <0x00020003 0x00000037>,
            <0x00020004 0x00000041>,
            <0x00020005 0x0000004b>,
            <0x00020006 0x00000057>,
            <0x00020007 0x00000063>,
            <0x00020008 0x0000006f>,

            <0x00030000 0x00000015>,
            <0x00030001 0x00000021>,
            <0x00030002 0x0000002d>,
            <0x00030003 0x00000039>,
            <0x00030004 0x00000045>,
            <0x00030005 0x00000053>,
            <0x00030006 0x0000005f>,
            <0x00030007 0x00000071>;
    #thermal-sensor-cells = <1>;
   };

   wdog1: watchdog@30280000 {
    compatible = "fsl,imx8mq-wdt", "fsl,imx21-wdt";
    reg = <0x30280000 0x10000>;
    interrupts = <0 78 4>;
    clocks = <&clk 212>;
    status = "disabled";
   };

   wdog2: watchdog@30290000 {
    compatible = "fsl,imx8mq-wdt", "fsl,imx21-wdt";
    reg = <0x30290000 0x10000>;
    interrupts = <0 79 4>;
    clocks = <&clk 213>;
    status = "disabled";
   };

   wdog3: watchdog@302a0000 {
    compatible = "fsl,imx8mq-wdt", "fsl,imx21-wdt";
    reg = <0x302a0000 0x10000>;
    interrupts = <0 10 4>;
    clocks = <&clk 214>;
    status = "disabled";
   };

   sdma2: dma-controller@302c0000 {
    compatible = "fsl,imx8mq-sdma","fsl,imx7d-sdma";
    reg = <0x302c0000 0x10000>;
    interrupts = <0 103 4>;
    clocks = <&clk 228>,
      <&clk 228>;
    clock-names = "ipg", "ahb";
    #dma-cells = <3>;
    fsl,sdma-ram-script-name = "imx/sdma/sdma-imx7d.bin";
   };

   lcdif: lcd-controller@30320000 {
    compatible = "fsl,imx8mq-lcdif", "fsl,imx28-lcdif";
    reg = <0x30320000 0x10000>;
    interrupts = <0 5 4>;
    clocks = <&clk 128>;
    clock-names = "pix";
    assigned-clocks = <&clk 33>,
        <&clk 36>,
        <&clk 128>,
        <&clk 35>;
    assigned-clock-parents = <&clk 2>,
        <&clk 35>,
        <&clk 37>;
    assigned-clock-rates = <0>, <0>, <0>, <594000000>;
    status = "disabled";

    port {
     lcdif_mipi_dsi: endpoint {
      remote-endpoint = <&mipi_dsi_lcdif_in>;
     };
    };
   };

   iomuxc: pinctrl@30330000 {
    compatible = "fsl,imx8mq-iomuxc";
    reg = <0x30330000 0x10000>;
   };

   iomuxc_gpr: syscon@30340000 {
    compatible = "fsl,imx8mq-iomuxc-gpr", "syscon", "simple-mfd";
    reg = <0x30340000 0x10000>;

    mux: mux-controller {
     compatible = "mmio-mux";
     #mux-control-cells = <1>;
     mux-reg-masks = <0x34 0x00000004>;
    };
   };

   ocotp: efuse@30350000 {
    compatible = "fsl,imx8mq-ocotp", "syscon";
    reg = <0x30350000 0x10000>;
    clocks = <&clk 250>;
    #address-cells = <1>;
    #size-cells = <1>;
# 608 "arch/arm64/boot/dts/freescale/imx8mq.dtsi"
    imx8mq_uid: soc-uid@4 {
     reg = <0x4 0x8>;
    };

    cpu_speed_grade: speed-grade@10 {
     reg = <0x10 4>;
    };

    fec_mac_address: mac-address@90 {
     reg = <0x90 6>;
    };
   };

   anatop: clock-controller@30360000 {
    compatible = "fsl,imx8mq-anatop";
    reg = <0x30360000 0x10000>;
    interrupts = <0 49 4>;
    #clock-cells = <1>;
   };

   snvs: snvs@30370000 {
    compatible = "fsl,sec-v4.0-mon", "syscon", "simple-mfd";
    reg = <0x30370000 0x10000>;

    snvs_rtc: snvs-rtc-lp{
     compatible = "fsl,sec-v4.0-mon-rtc-lp";
     regmap =<&snvs>;
     offset = <0x34>;
     interrupts = <0 19 4>,
      <0 20 4>;
     clocks = <&clk 264>;
     clock-names = "snvs-rtc";
    };

    snvs_pwrkey: snvs-powerkey {
     compatible = "fsl,sec-v4.0-pwrkey";
     regmap = <&snvs>;
     interrupts = <0 4 4>;
     clocks = <&clk 264>;
     clock-names = "snvs-pwrkey";
     linux,keycode = <116>;
     wakeup-source;
     status = "disabled";
    };
   };

   clk: clock-controller@30380000 {
    compatible = "fsl,imx8mq-ccm";
    reg = <0x30380000 0x10000>;
    interrupts = <0 85 4>,
                 <0 86 4>;
    #clock-cells = <1>;
    clocks = <&ckil>, <&osc_25m>, <&osc_27m>,
             <&clk_ext1>, <&clk_ext2>,
             <&clk_ext3>, <&clk_ext4>;
    clock-names = "ckil", "osc_25m", "osc_27m",
                  "clk_ext1", "clk_ext2",
                  "clk_ext3", "clk_ext4";
    assigned-clocks = <&clk 88>,
        <&clk 289>,
        <&clk 113>,
        <&clk 117>,
        <&clk 26>,
        <&clk 31>,
        <&clk 25>,
        <&clk 30>;
    assigned-clock-rates = <0>, <0>,
             <800000000>,
             <0>,
             <0>,
             <0>,
             <786432000>,
             <722534400>;
    assigned-clock-parents = <&clk 78>,
        <&clk 12>,
        <0>,
        <&clk 86>,
        <&clk 25>,
        <&clk 30>;
   };

   src: reset-controller@30390000 {
    compatible = "fsl,imx8mq-src", "syscon";
    reg = <0x30390000 0x10000>;
    interrupts = <0 89 4>;
    #reset-cells = <1>;
   };

   gpc: gpc@303a0000 {
    compatible = "fsl,imx8mq-gpc";
    reg = <0x303a0000 0x10000>;
    interrupts = <0 87 4>;
    interrupt-parent = <&gic>;
    interrupt-controller;
    #interrupt-cells = <3>;

    pgc {
     #address-cells = <1>;
     #size-cells = <0>;

     pgc_mipi: power-domain@0 {
      #power-domain-cells = <0>;
      reg = <0>;
     };
# 728 "arch/arm64/boot/dts/freescale/imx8mq.dtsi"
     pgc_pcie: power-domain@1 {
      #power-domain-cells = <0>;
      reg = <1>;
      power-domains = <&pgc_pcie2>;
     };

     pgc_otg1: power-domain@2 {
      #power-domain-cells = <0>;
      reg = <2>;
     };

     pgc_otg2: power-domain@3 {
      #power-domain-cells = <0>;
      reg = <3>;
     };

     pgc_ddr1: power-domain@4 {
      #power-domain-cells = <0>;
      reg = <4>;
     };

     pgc_gpu: power-domain@5 {
      #power-domain-cells = <0>;
      reg = <5>;
      clocks = <&clk 215>,
               <&clk 102>,
        <&clk 111>,
               <&clk 112>;
     };

     pgc_vpu: power-domain@6 {
      #power-domain-cells = <0>;
      reg = <6>;
      clocks = <&clk 223>,
        <&clk 229>,
        <&clk 230>;
      assigned-clocks = <&clk 120>,
          <&clk 121>,
          <&clk 106>,
          <&clk 21>;
      assigned-clock-parents = <&clk 22>,
          <&clk 22>,
          <&clk 78>,
          <&clk 20>;
      assigned-clock-rates = <600000000>,
               <600000000>,
               <800000000>,
               <0>;
     };

     pgc_disp: power-domain@7 {
      #power-domain-cells = <0>;
      reg = <7>;
     };

     pgc_mipi_csi1: power-domain@8 {
      #power-domain-cells = <0>;
      reg = <8>;
     };

     pgc_mipi_csi2: power-domain@9 {
      #power-domain-cells = <0>;
      reg = <9>;
     };

     pgc_pcie2: power-domain@a {
      #power-domain-cells = <0>;
      reg = <10>;
     };
    };
   };
  };

  aips2: bus@30400000 {
   compatible = "fsl,aips-bus", "simple-bus";
   reg = <0x30400000 0x400000>;
   #address-cells = <1>;
   #size-cells = <1>;
   ranges = <0x30400000 0x30400000 0x400000>;

   pwm1: pwm@30660000 {
    compatible = "fsl,imx8mq-pwm", "fsl,imx27-pwm";
    reg = <0x30660000 0x10000>;
    interrupts = <0 81 4>;
    clocks = <&clk 191>,
             <&clk 191>;
    clock-names = "ipg", "per";
    #pwm-cells = <3>;
    status = "disabled";
   };

   pwm2: pwm@30670000 {
    compatible = "fsl,imx8mq-pwm", "fsl,imx27-pwm";
    reg = <0x30670000 0x10000>;
    interrupts = <0 82 4>;
    clocks = <&clk 192>,
             <&clk 192>;
    clock-names = "ipg", "per";
    #pwm-cells = <3>;
    status = "disabled";
   };

   pwm3: pwm@30680000 {
    compatible = "fsl,imx8mq-pwm", "fsl,imx27-pwm";
    reg = <0x30680000 0x10000>;
    interrupts = <0 83 4>;
    clocks = <&clk 193>,
             <&clk 193>;
    clock-names = "ipg", "per";
    #pwm-cells = <3>;
    status = "disabled";
   };

   pwm4: pwm@30690000 {
    compatible = "fsl,imx8mq-pwm", "fsl,imx27-pwm";
    reg = <0x30690000 0x10000>;
    interrupts = <0 84 4>;
    clocks = <&clk 194>,
             <&clk 194>;
    clock-names = "ipg", "per";
    #pwm-cells = <3>;
    status = "disabled";
   };

   system_counter: timer@306a0000 {
    compatible = "nxp,sysctr-timer";
    reg = <0x306a0000 0x20000>;
    interrupts = <0 47 4>;
    clocks = <&osc_25m>;
    clock-names = "per";
   };
  };

  aips3: bus@30800000 {
   compatible = "fsl,aips-bus", "simple-bus";
   reg = <0x30800000 0x400000>;
   #address-cells = <1>;
   #size-cells = <1>;
   ranges = <0x30800000 0x30800000 0x400000>,
     <0x08000000 0x08000000 0x10000000>;

   spdif1: spdif@30810000 {
    compatible = "fsl,imx35-spdif";
    reg = <0x30810000 0x10000>;
    interrupts = <0 6 4>;
    clocks = <&clk 236>,
     <&clk 2>,
     <&clk 135>,
     <&clk 0>,
     <&clk 0>,
     <&clk 0>,
     <&clk 236>,
     <&clk 0>,
     <&clk 0>,
     <&clk 0>;
    clock-names = "core", "rxtx0",
           "rxtx1", "rxtx2",
           "rxtx3", "rxtx4",
           "rxtx5", "rxtx6",
           "rxtx7", "spba";
    dmas = <&sdma1 8 18 0>, <&sdma1 9 18 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   ecspi1: spi@30820000 {
    #address-cells = <1>;
    #size-cells = <0>;
    compatible = "fsl,imx8mq-ecspi", "fsl,imx51-ecspi";
    reg = <0x30820000 0x10000>;
    interrupts = <0 31 4>;
    clocks = <&clk 179>,
      <&clk 179>;
    clock-names = "ipg", "per";
    dmas = <&sdma1 0 7 1>, <&sdma1 1 7 2>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   ecspi2: spi@30830000 {
    #address-cells = <1>;
    #size-cells = <0>;
    compatible = "fsl,imx8mq-ecspi", "fsl,imx51-ecspi";
    reg = <0x30830000 0x10000>;
    interrupts = <0 32 4>;
    clocks = <&clk 180>,
      <&clk 180>;
    clock-names = "ipg", "per";
    dmas = <&sdma1 2 7 1>, <&sdma1 3 7 2>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   ecspi3: spi@30840000 {
    #address-cells = <1>;
    #size-cells = <0>;
    compatible = "fsl,imx8mq-ecspi", "fsl,imx51-ecspi";
    reg = <0x30840000 0x10000>;
    interrupts = <0 33 4>;
    clocks = <&clk 181>,
      <&clk 181>;
    clock-names = "ipg", "per";
    dmas = <&sdma1 4 7 1>, <&sdma1 5 7 2>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   uart1: serial@30860000 {
    compatible = "fsl,imx8mq-uart",
                 "fsl,imx6q-uart";
    reg = <0x30860000 0x10000>;
    interrupts = <0 26 4>;
    clocks = <&clk 202>,
             <&clk 202>;
    clock-names = "ipg", "per";
    dmas = <&sdma1 22 4 0>, <&sdma1 23 4 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   uart3: serial@30880000 {
    compatible = "fsl,imx8mq-uart",
                 "fsl,imx6q-uart";
    reg = <0x30880000 0x10000>;
    interrupts = <0 28 4>;
    clocks = <&clk 204>,
             <&clk 204>;
    clock-names = "ipg", "per";
    dmas = <&sdma1 26 4 0>, <&sdma1 27 4 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   uart2: serial@30890000 {
    compatible = "fsl,imx8mq-uart",
                 "fsl,imx6q-uart";
    reg = <0x30890000 0x10000>;
    interrupts = <0 27 4>;
    clocks = <&clk 203>,
             <&clk 203>;
    clock-names = "ipg", "per";
    dmas = <&sdma1 24 4 0>, <&sdma1 25 4 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   spdif2: spdif@308a0000 {
    compatible = "fsl,imx35-spdif";
    reg = <0x308a0000 0x10000>;
    interrupts = <0 13 4>;
    clocks = <&clk 236>,
     <&clk 2>,
     <&clk 136>,
     <&clk 0>,
     <&clk 0>,
     <&clk 0>,
     <&clk 236>,
     <&clk 0>,
     <&clk 0>,
     <&clk 0>;
    clock-names = "core", "rxtx0",
           "rxtx1", "rxtx2",
           "rxtx3", "rxtx4",
           "rxtx5", "rxtx6",
           "rxtx7", "spba";
    dmas = <&sdma1 16 18 0>, <&sdma1 17 18 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   sai2: sai@308b0000 {
    #sound-dai-cells = <0>;
    compatible = "fsl,imx8mq-sai";
    reg = <0x308b0000 0x10000>;
    interrupts = <0 96 4>;
    clocks = <&clk 239>,
      <&clk 197>,
      <&clk 0>, <&clk 0>;
    clock-names = "bus", "mclk1", "mclk2", "mclk3";
    dmas = <&sdma1 10 24 0>, <&sdma1 11 24 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   sai3: sai@308c0000 {
    #sound-dai-cells = <0>;
    compatible = "fsl,imx8mq-sai";
    reg = <0x308c0000 0x10000>;
    interrupts = <0 50 4>;
    clocks = <&clk 240>,
             <&clk 198>,
             <&clk 0>, <&clk 0>;
    clock-names = "bus", "mclk1", "mclk2", "mclk3";
    dmas = <&sdma1 12 24 0>, <&sdma1 13 24 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   crypto: crypto@30900000 {
    compatible = "fsl,sec-v4.0";
    #address-cells = <1>;
    #size-cells = <1>;
    reg = <0x30900000 0x40000>;
    ranges = <0 0x30900000 0x40000>;
    interrupts = <0 91 4>;
    clocks = <&clk 116>,
      <&clk 236>;
    clock-names = "aclk", "ipg";

    sec_jr0: jr@1000 {
     compatible = "fsl,sec-v4.0-job-ring";
     reg = <0x1000 0x1000>;
     interrupts = <0 105 4>;
     status = "disabled";
    };

    sec_jr1: jr@2000 {
     compatible = "fsl,sec-v4.0-job-ring";
     reg = <0x2000 0x1000>;
     interrupts = <0 106 4>;
    };

    sec_jr2: jr@3000 {
     compatible = "fsl,sec-v4.0-job-ring";
     reg = <0x3000 0x1000>;
     interrupts = <0 114 4>;
    };
   };

   mipi_dsi: mipi-dsi@30a00000 {
    compatible = "fsl,imx8mq-nwl-dsi";
    reg = <0x30a00000 0x300>;
    clocks = <&clk 163>,
      <&clk 244>,
      <&clk 245>,
      <&clk 164>,
      <&clk 128>;
    clock-names = "core", "rx_esc", "tx_esc", "phy_ref", "lcdif";
    assigned-clocks = <&clk 244>,
        <&clk 163>,
        <&clk 245>;
    assigned-clock-parents = <&clk 71>,
        <&clk 76>;
    assigned-clock-rates = <80000000>, <266000000>, <20000000>;
    interrupts = <0 34 4>;
    mux-controls = <&mux 0>;
    power-domains = <&pgc_mipi>;
    phys = <&dphy>;
    phy-names = "dphy";
    resets = <&src 21>,
      <&src 23>,
      <&src 24>,
      <&src 25>;
    reset-names = "byte", "dpi", "esc", "pclk";
    status = "disabled";

    ports {
     #address-cells = <1>;
     #size-cells = <0>;

     port@0 {
      reg = <0>;
      #address-cells = <1>;
      #size-cells = <0>;
      mipi_dsi_lcdif_in: endpoint@0 {
       reg = <0>;
       remote-endpoint = <&lcdif_mipi_dsi>;
      };
     };
    };
   };

   dphy: dphy@30a00300 {
    compatible = "fsl,imx8mq-mipi-dphy";
    reg = <0x30a00300 0x100>;
    clocks = <&clk 164>;
    clock-names = "phy_ref";
    assigned-clocks = <&clk 33>,
        <&clk 36>,
        <&clk 164>,
        <&clk 35>;
    assigned-clock-parents = <&clk 2>,
        <&clk 35>,
        <&clk 37>;
    assigned-clock-rates = <0>, <0>, <24000000>, <594000000>;
    #phy-cells = <0>;
    power-domains = <&pgc_mipi>;
    status = "disabled";
   };

   i2c1: i2c@30a20000 {
    compatible = "fsl,imx8mq-i2c", "fsl,imx21-i2c";
    reg = <0x30a20000 0x10000>;
    interrupts = <0 35 4>;
    clocks = <&clk 184>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   i2c2: i2c@30a30000 {
    compatible = "fsl,imx8mq-i2c", "fsl,imx21-i2c";
    reg = <0x30a30000 0x10000>;
    interrupts = <0 36 4>;
    clocks = <&clk 185>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   i2c3: i2c@30a40000 {
    compatible = "fsl,imx8mq-i2c", "fsl,imx21-i2c";
    reg = <0x30a40000 0x10000>;
    interrupts = <0 37 4>;
    clocks = <&clk 186>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   i2c4: i2c@30a50000 {
    compatible = "fsl,imx8mq-i2c", "fsl,imx21-i2c";
    reg = <0x30a50000 0x10000>;
    interrupts = <0 38 4>;
    clocks = <&clk 187>;
    #address-cells = <1>;
    #size-cells = <0>;
    status = "disabled";
   };

   uart4: serial@30a60000 {
    compatible = "fsl,imx8mq-uart",
                 "fsl,imx6q-uart";
    reg = <0x30a60000 0x10000>;
    interrupts = <0 29 4>;
    clocks = <&clk 205>,
             <&clk 205>;
    clock-names = "ipg", "per";
    dmas = <&sdma1 28 4 0>, <&sdma1 29 4 0>;
    dma-names = "rx", "tx";
    status = "disabled";
   };

   mipi_csi1: csi@30a70000 {
    compatible = "fsl,imx8mq-mipi-csi2";
    reg = <0x30a70000 0x1000>;
    clocks = <&clk 167>,
       <&clk 169>,
       <&clk 168>;
    clock-names = "core", "esc", "ui";
    assigned-clocks = <&clk 167>,
        <&clk 168>,
        <&clk 169>;
    assigned-clock-rates = <266000000>, <333000000>, <66000000>;
    assigned-clock-parents = <&clk 76>,
     <&clk 87>,
     <&clk 78>;
    power-domains = <&pgc_mipi_csi1>;
    resets = <&src 38>,
      <&src 39>,
      <&src 40>;
    fsl,mipi-phy-gpr = <&iomuxc_gpr 0x88>;
    interconnects = <&noc 14 &noc 2>;
    interconnect-names = "dram";
    status = "disabled";

    ports {
     #address-cells = <1>;
     #size-cells = <0>;

     port@1 {
      reg = <1>;

      csi1_mipi_ep: endpoint {
       remote-endpoint = <&csi1_ep>;
      };
     };
    };
   };

   csi1: csi@30a90000 {
    compatible = "fsl,imx8mq-csi";
    reg = <0x30a90000 0x10000>;
    interrupts = <0 42 4>;
    clocks = <&clk 224>;
    clock-names = "mclk";
    status = "disabled";

    port {
     csi1_ep: endpoint {
      remote-endpoint = <&csi1_mipi_ep>;
     };
    };
   };

   mipi_csi2: csi@30b60000 {
    compatible = "fsl,imx8mq-mipi-csi2";
    reg = <0x30b60000 0x1000>;
    clocks = <&clk 170>,
       <&clk 172>,
       <&clk 171>;
    clock-names = "core", "esc", "ui";
    assigned-clocks = <&clk 170>,
        <&clk 171>,
        <&clk 172>;
    assigned-clock-rates = <266000000>, <333000000>, <66000000>;
    assigned-clock-parents = <&clk 76>,
     <&clk 87>,
     <&clk 78>;
    power-domains = <&pgc_mipi_csi2>;
    resets = <&src 41>,
      <&src 42>,
      <&src 43>;
    fsl,mipi-phy-gpr = <&iomuxc_gpr 0xa4>;
    interconnects = <&noc 15 &noc 2>;
    interconnect-names = "dram";
    status = "disabled";

    ports {
     #address-cells = <1>;
     #size-cells = <0>;

     port@1 {
      reg = <1>;

      csi2_mipi_ep: endpoint {
       remote-endpoint = <&csi2_ep>;
      };
     };
    };
   };

   csi2: csi@30b80000 {
    compatible = "fsl,imx8mq-csi";
    reg = <0x30b80000 0x10000>;
    interrupts = <0 43 4>;
    clocks = <&clk 225>;
    clock-names = "mclk";
    status = "disabled";

    port {
     csi2_ep: endpoint {
      remote-endpoint = <&csi2_mipi_ep>;
     };
    };
   };

   mu: mailbox@30aa0000 {
    compatible = "fsl,imx8mq-mu", "fsl,imx6sx-mu";
    reg = <0x30aa0000 0x10000>;
    interrupts = <0 88 4>;
    clocks = <&clk 253>;
    #mbox-cells = <2>;
   };

   usdhc1: mmc@30b40000 {
    compatible = "fsl,imx8mq-usdhc",
                 "fsl,imx7d-usdhc";
    reg = <0x30b40000 0x10000>;
    interrupts = <0 22 4>;
    clocks = <&clk 236>,
             <&clk 105>,
             <&clk 210>;
    clock-names = "ipg", "ahb", "per";
    fsl,tuning-start-tap = <20>;
    fsl,tuning-step = <2>;
    bus-width = <4>;
    status = "disabled";
   };

   usdhc2: mmc@30b50000 {
    compatible = "fsl,imx8mq-usdhc",
                 "fsl,imx7d-usdhc";
    reg = <0x30b50000 0x10000>;
    interrupts = <0 23 4>;
    clocks = <&clk 236>,
             <&clk 105>,
             <&clk 211>;
    clock-names = "ipg", "ahb", "per";
    fsl,tuning-start-tap = <20>;
    fsl,tuning-step = <2>;
    bus-width = <4>;
    status = "disabled";
   };

   qspi0: spi@30bb0000 {
    #address-cells = <1>;
    #size-cells = <0>;
    compatible = "fsl,imx8mq-qspi", "fsl,imx7d-qspi";
    reg = <0x30bb0000 0x10000>,
          <0x08000000 0x10000000>;
    reg-names = "QuadSPI", "QuadSPI-memory";
    interrupts = <0 107 4>;
    clocks = <&clk 195>,
      <&clk 195>;
    clock-names = "qspi_en", "qspi";
    status = "disabled";
   };

   sdma1: dma-controller@30bd0000 {
    compatible = "fsl,imx8mq-sdma","fsl,imx7d-sdma";
    reg = <0x30bd0000 0x10000>;
    interrupts = <0 2 4>;
    clocks = <&clk 227>,
      <&clk 116>;
    clock-names = "ipg", "ahb";
    #dma-cells = <3>;
    fsl,sdma-ram-script-name = "imx/sdma/sdma-imx7d.bin";
   };

   fec1: ethernet@30be0000 {
    compatible = "fsl,imx8mq-fec", "fsl,imx6sx-fec";
    reg = <0x30be0000 0x10000>;
    interrupts = <0 118 4>,
                 <0 119 4>,
          <0 120 4>,
          <0 121 4>;
    clocks = <&clk 182>,
             <&clk 182>,
             <&clk 138>,
             <&clk 137>,
             <&clk 139>;
    clock-names = "ipg", "ahb", "ptp",
                  "enet_clk_ref", "enet_out";
    assigned-clocks = <&clk 104>,
        <&clk 138>,
        <&clk 137>,
        <&clk 139>;
    assigned-clock-parents = <&clk 76>,
        <&clk 80>,
        <&clk 81>,
        <&clk 79>;
    assigned-clock-rates = <0>, <100000000>, <125000000>, <0>;
    fsl,num-tx-queues = <3>;
    fsl,num-rx-queues = <3>;
    nvmem-cells = <&fec_mac_address>;
    nvmem-cell-names = "mac-address";
    fsl,stop-mode = <&iomuxc_gpr 0x10 3>;
    status = "disabled";
   };
  };

  noc: interconnect@32700000 {
   compatible = "fsl,imx8mq-noc", "fsl,imx8m-noc";
   reg = <0x32700000 0x100000>;
   clocks = <&clk 113>;
   fsl,ddrc = <&ddrc>;
   #interconnect-cells = <1>;
   operating-points-v2 = <&noc_opp_table>;

   noc_opp_table: opp-table {
    compatible = "operating-points-v2";

    opp-133000000 {
     opp-hz = /bits/ 64 <133333333>;
    };

    opp-400000000 {
     opp-hz = /bits/ 64 <400000000>;
    };

    opp-800000000 {
     opp-hz = /bits/ 64 <800000000>;
    };
   };
  };

  aips4: bus@32c00000 {
   compatible = "fsl,aips-bus", "simple-bus";
   reg = <0x32c00000 0x400000>;
   #address-cells = <1>;
   #size-cells = <1>;
   ranges = <0x32c00000 0x32c00000 0x400000>;

   irqsteer: interrupt-controller@32e2d000 {
    compatible = "fsl,imx8m-irqsteer", "fsl,imx-irqsteer";
    reg = <0x32e2d000 0x1000>;
    interrupts = <0 18 4>;
    clocks = <&clk 248>;
    clock-names = "ipg";
    fsl,channel = <0>;
    fsl,num-irqs = <64>;
    interrupt-controller;
    #interrupt-cells = <1>;
   };
  };

  gpu: gpu@38000000 {
   compatible = "vivante,gc";
   reg = <0x38000000 0x40000>;
   interrupts = <0 3 4>;
   clocks = <&clk 215>,
            <&clk 102>,
            <&clk 111>,
            <&clk 112>;
   clock-names = "core", "shader", "bus", "reg";
   #cooling-cells = <2>;
   assigned-clocks = <&clk 97>,
                     <&clk 100>,
                     <&clk 111>,
                     <&clk 112>,
                     <&clk 16>;
   assigned-clock-parents = <&clk 17>,
                            <&clk 17>,
                            <&clk 17>,
                            <&clk 17>,
                            <&clk 15>;
   assigned-clock-rates = <800000000>, <800000000>,
                          <800000000>, <800000000>, <0>;
   power-domains = <&pgc_gpu>;
  };

  usb_dwc3_0: usb@38100000 {
   compatible = "fsl,imx8mq-dwc3", "snps,dwc3";
   reg = <0x38100000 0x10000>;
   clocks = <&clk 206>,
            <&clk 152>,
     <&clk 1>;
   clock-names = "bus_early", "ref", "suspend";
   assigned-clocks = <&clk 110>,
                     <&clk 152>;
   assigned-clock-parents = <&clk 86>,
                            <&clk 72>;
   assigned-clock-rates = <500000000>, <100000000>;
   interrupts = <0 40 4>;
   phys = <&usb3_phy0>, <&usb3_phy0>;
   phy-names = "usb2-phy", "usb3-phy";
   power-domains = <&pgc_otg1>;
   status = "disabled";
  };

  usb3_phy0: usb-phy@381f0040 {
   compatible = "fsl,imx8mq-usb-phy";
   reg = <0x381f0040 0x40>;
   clocks = <&clk 208>;
   clock-names = "phy";
   assigned-clocks = <&clk 153>;
   assigned-clock-parents = <&clk 72>;
   assigned-clock-rates = <100000000>;
   #phy-cells = <0>;
   status = "disabled";
  };

  usb_dwc3_1: usb@38200000 {
   compatible = "fsl,imx8mq-dwc3", "snps,dwc3";
   reg = <0x38200000 0x10000>;
   clocks = <&clk 207>,
            <&clk 152>,
     <&clk 1>;
   clock-names = "bus_early", "ref", "suspend";
   assigned-clocks = <&clk 110>,
                     <&clk 152>;
   assigned-clock-parents = <&clk 86>,
                            <&clk 72>;
   assigned-clock-rates = <500000000>, <100000000>;
   interrupts = <0 41 4>;
   phys = <&usb3_phy1>, <&usb3_phy1>;
   phy-names = "usb2-phy", "usb3-phy";
   power-domains = <&pgc_otg2>;
   status = "disabled";
  };

  usb3_phy1: usb-phy@382f0040 {
   compatible = "fsl,imx8mq-usb-phy";
   reg = <0x382f0040 0x40>;
   clocks = <&clk 209>;
   clock-names = "phy";
   assigned-clocks = <&clk 153>;
   assigned-clock-parents = <&clk 72>;
   assigned-clock-rates = <100000000>;
   #phy-cells = <0>;
   status = "disabled";
  };

  vpu_g1: video-codec@38300000 {
   compatible = "nxp,imx8mq-vpu-g1";
   reg = <0x38300000 0x10000>;
   interrupts = <0 7 4>;
   clocks = <&clk 229>;
   power-domains = <&vpu_blk_ctrl 0>;
  };

  vpu_g2: video-codec@38310000 {
   compatible = "nxp,imx8mq-vpu-g2";
   reg = <0x38310000 0x10000>;
   interrupts = <0 8 4>;
   clocks = <&clk 230>;
   power-domains = <&vpu_blk_ctrl 1>;
  };

  vpu_blk_ctrl: blk-ctrl@38320000 {
   compatible = "fsl,imx8mq-vpu-blk-ctrl";
   reg = <0x38320000 0x100>;
   power-domains = <&pgc_vpu>, <&pgc_vpu>, <&pgc_vpu>;
   power-domain-names = "bus", "g1", "g2";
   clocks = <&clk 229>,
     <&clk 230>;
   clock-names = "g1", "g2";
   #power-domain-cells = <1>;
  };

  pcie0: pcie@33800000 {
   compatible = "fsl,imx8mq-pcie";
   reg = <0x33800000 0x400000>,
         <0x1ff00000 0x80000>;
   reg-names = "dbi", "config";
   #address-cells = <3>;
   #size-cells = <2>;
   device_type = "pci";
   bus-range = <0x00 0xff>;
   ranges = <0x81000000 0 0x00000000 0x1ff80000 0 0x00010000>,
     <0x82000000 0 0x18000000 0x18000000 0 0x07f00000>;
   num-lanes = <1>;
   interrupts = <0 122 4>;
   interrupt-names = "msi";
   #interrupt-cells = <1>;
   interrupt-map-mask = <0 0 0 0x7>;
   interrupt-map = <0 0 0 1 &gic 0 125 4>,
                   <0 0 0 2 &gic 0 124 4>,
                   <0 0 0 3 &gic 0 123 4>,
                   <0 0 0 4 &gic 0 122 4>;
   fsl,max-link-speed = <2>;
   linux,pci-domain = <0>;
   clocks = <&clk 189>,
     <&clk 125>,
     <&clk 125>,
     <&clk 126>;
   clock-names = "pcie", "pcie_bus", "pcie_phy", "pcie_aux";
   power-domains = <&pgc_pcie>;
   resets = <&src 26>,
            <&src 28>,
            <&src 29>;
   reset-names = "pciephy", "apps", "turnoff";
   assigned-clocks = <&clk 124>,
                     <&clk 125>,
                     <&clk 126>;
   assigned-clock-parents = <&clk 84>,
                            <&clk 80>,
                            <&clk 71>;
   assigned-clock-rates = <250000000>, <100000000>,
                          <10000000>;
   status = "disabled";
  };

  pcie1: pcie@33c00000 {
   compatible = "fsl,imx8mq-pcie";
   reg = <0x33c00000 0x400000>,
         <0x27f00000 0x80000>;
   reg-names = "dbi", "config";
   #address-cells = <3>;
   #size-cells = <2>;
   device_type = "pci";
   ranges = <0x81000000 0 0x00000000 0x27f80000 0 0x00010000>,
      <0x82000000 0 0x20000000 0x20000000 0 0x07f00000>;
   num-lanes = <1>;
   interrupts = <0 74 4>;
   interrupt-names = "msi";
   #interrupt-cells = <1>;
   interrupt-map-mask = <0 0 0 0x7>;
   interrupt-map = <0 0 0 1 &gic 0 77 4>,
     <0 0 0 2 &gic 0 76 4>,
     <0 0 0 3 &gic 0 75 4>,
     <0 0 0 4 &gic 0 74 4>;
   fsl,max-link-speed = <2>;
   linux,pci-domain = <1>;
   clocks = <&clk 190>,
     <&clk 174>,
     <&clk 174>,
     <&clk 175>;
   clock-names = "pcie", "pcie_bus", "pcie_phy", "pcie_aux";
   power-domains = <&pgc_pcie>;
   resets = <&src 34>,
            <&src 36>,
            <&src 37>;
   reset-names = "pciephy", "apps", "turnoff";
   assigned-clocks = <&clk 173>,
                     <&clk 174>,
                     <&clk 175>;
   assigned-clock-parents = <&clk 84>,
                            <&clk 80>,
                            <&clk 71>;
   assigned-clock-rates = <250000000>, <100000000>,
                          <10000000>;
   status = "disabled";
  };

  pcie1_ep: pcie-ep@33c00000 {
   compatible = "fsl,imx8mq-pcie-ep";
   reg = <0x33c00000 0x000400000>,
         <0x20000000 0x08000000>;
   reg-names = "dbi", "addr_space";
   num-lanes = <1>;
   interrupts = <0 80 4>;
   interrupt-names = "dma";
   fsl,max-link-speed = <2>;
   clocks = <&clk 190>,
     <&clk 174>,
     <&clk 174>,
     <&clk 175>;
   clock-names = "pcie", "pcie_bus", "pcie_phy", "pcie_aux";
   power-domains = <&pgc_pcie>;
   resets = <&src 34>,
     <&src 36>,
     <&src 37>;
   reset-names = "pciephy", "apps", "turnoff";
   assigned-clocks = <&clk 173>,
       <&clk 174>,
       <&clk 175>;
   assigned-clock-parents = <&clk 84>,
       <&clk 80>,
       <&clk 71>;
   assigned-clock-rates = <250000000>, <100000000>,
            <10000000>;
   num-ib-windows = <4>;
   num-ob-windows = <4>;
   status = "disabled";
  };

  gic: interrupt-controller@38800000 {
   compatible = "arm,gic-v3";
   reg = <0x38800000 0x10000>,
         <0x38880000 0xc0000>,
         <0x31000000 0x2000>,
         <0x31010000 0x2000>,
         <0x31020000 0x2000>;
   #interrupt-cells = <3>;
   interrupt-controller;
   interrupts = <1 9 4>;
   interrupt-parent = <&gic>;
  };

  ddrc: memory-controller@3d400000 {
   compatible = "fsl,imx8mq-ddrc", "fsl,imx8m-ddrc";
   reg = <0x3d400000 0x400000>;
   clock-names = "core", "pll", "alt", "apb";
   clocks = <&clk 252>,
     <&clk 234>,
     <&clk 118>,
     <&clk 119>;
   status = "disabled";
  };

  ddr-pmu@3d800000 {
   compatible = "fsl,imx8mq-ddr-pmu", "fsl,imx8m-ddr-pmu";
   reg = <0x3d800000 0x400000>;
   interrupt-parent = <&gic>;
   interrupts = <0 98 4>;
  };
 };
};
# 14 "arch/arm64/boot/dts/freescale/imx8mq-librem5.dtsi" 2

/ {
 model = "Purism Librem 5";
 compatible = "purism,librem5", "fsl,imx8mq";
 chassis-type = "handset";

 backlight_dsi: backlight-dsi {
  compatible = "led-backlight";
  leds = <&led_backlight>;
  brightness-levels = <255>;
  default-brightness-level = <190>;
 };

 pmic_osc: clock-pmic {
  compatible = "fixed-clock";
  #clock-cells = <0>;
  clock-frequency = <32768>;
  clock-output-names = "pmic_osc";
 };

 chosen {
  stdout-path = &uart1;
 };

 gpio-keys {
  compatible = "gpio-keys";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_keys>;

  key-vol-down {
   label = "VOL_DOWN";
   gpios = <&gpio1 17 1>;
   linux,code = <114>;
   debounce-interval = <50>;
   wakeup-source;
  };

  key-vol-up {
   label = "VOL_UP";
   gpios = <&gpio1 16 1>;
   linux,code = <115>;
   debounce-interval = <50>;
   wakeup-source;
  };
 };

 led-controller {
  compatible = "pwm-leds-multicolor";

  multi-led {
   color = <9>;
   function = "status";
   max-brightness = <248>;

   led-0 {
    color = <3>;
    pwms = <&pwm2 0 50000 0>;
   };

   led-1 {
    color = <2>;
    pwms = <&pwm4 0 50000 0>;
   };

   led-2 {
    color = <1>;
    pwms = <&pwm3 0 50000 0>;
   };
  };
 };

 reg_aud_1v8: regulator-audio-1v8 {
  compatible = "regulator-fixed";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_audiopwr>;
  regulator-name = "AUD_1V8";
  regulator-min-microvolt = <1800000>;
  regulator-max-microvolt = <1800000>;
  gpio = <&gpio1 4 0>;
  enable-active-high;
 };

 reg_mic_2v4: regulator-mic-2v4 {
  compatible = "regulator-fixed";
  regulator-name = "MIC_2V4";
  regulator-min-microvolt = <2400000>;
  regulator-max-microvolt = <2400000>;
  vin-supply = <&reg_aud_1v8>;
 };





 reg_csi_1v8: regulator-csi-1v8 {
  compatible = "regulator-fixed";
  regulator-name = "CAMERA_VDDIO_1V8";
  regulator-min-microvolt = <1800000>;
  regulator-max-microvolt = <1800000>;
  vin-supply = <&reg_vdd_3v3>;
  gpio = <&gpio1 0 0>;
  enable-active-high;
 };


 reg_vcam_1v2: regulator-vcam-1v2 {
  compatible = "regulator-fixed";
  regulator-name = "CAMERA_VDDD_1V2";
  regulator-min-microvolt = <1200000>;
  regulator-max-microvolt = <1200000>;
  vin-supply = <&reg_vdd_1v8>;
  enable-active-high;
 };

 reg_vcam_2v8: regulator-vcam-2v8 {
  compatible = "regulator-fixed";
  regulator-name = "CAMERA_VDDA_2V8";
  regulator-min-microvolt = <2800000>;
  regulator-max-microvolt = <2800000>;
  vin-supply = <&reg_vdd_3v3>;
  gpio = <&gpio1 0 0>;
  enable-active-high;
 };

 reg_gnss: regulator-gnss {
  compatible = "regulator-fixed";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_gnsspwr>;
  regulator-name = "GNSS";
  regulator-min-microvolt = <3300000>;
  regulator-max-microvolt = <3300000>;
  gpio = <&gpio3 12 0>;
  enable-active-high;
 };

 reg_hub: regulator-hub {
  compatible = "regulator-fixed";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_hub_pwr>;
  regulator-name = "HUB";
  regulator-min-microvolt = <3300000>;
  regulator-max-microvolt = <3300000>;
  gpio = <&gpio1 14 0>;
  enable-active-high;
 };

 reg_lcd_1v8: regulator-lcd-1v8 {
  compatible = "regulator-fixed";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_dsien>;
  regulator-name = "LCD_1V8";
  regulator-min-microvolt = <1800000>;
  regulator-max-microvolt = <1800000>;
  vin-supply = <&reg_vdd_1v8>;
  gpio = <&gpio1 5 0>;
  enable-active-high;

  regulator-always-on;
 };

 reg_lcd_3v4: regulator-lcd-3v4 {
  compatible = "regulator-fixed";
  regulator-name = "LCD_3V4";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_dsibiasen>;
  vin-supply = <&reg_vsys_3v4>;
  gpio = <&gpio1 20 0>;
  enable-active-high;
 };

 reg_vdd_sen: regulator-vdd-sen {
  compatible = "regulator-fixed";
  regulator-name = "VDD_SEN";
  regulator-min-microvolt = <3300000>;
  regulator-max-microvolt = <3300000>;
 };

 reg_vdd_1v8: regulator-vdd-1v8 {
  compatible = "regulator-fixed";
  regulator-name = "VDD_1V8";
  regulator-min-microvolt = <1800000>;
  regulator-max-microvolt = <1800000>;
  vin-supply = <&buck7_reg>;
 };

 reg_vdd_3v3: regulator-vdd-3v3 {
  compatible = "regulator-fixed";
  regulator-name = "VDD_3V3";
  regulator-min-microvolt = <3300000>;
  regulator-max-microvolt = <3300000>;
 };

 reg_vsys_3v4: regulator-vsys-3v4 {
  compatible = "regulator-fixed";
  regulator-name = "VSYS_3V4";
  regulator-min-microvolt = <3400000>;
  regulator-max-microvolt = <3400000>;
  regulator-always-on;
 };

 reg_wifi_3v3: regulator-wifi-3v3 {
  compatible = "regulator-fixed";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_wifi_pwr>;
  regulator-name = "3V3_WIFI";
  regulator-min-microvolt = <3300000>;
  regulator-max-microvolt = <3300000>;
  gpio = <&gpio3 10 0>;
  enable-active-high;
  vin-supply = <&reg_vdd_3v3>;
 };

 sound {
  compatible = "simple-audio-card";
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_hp>;
  simple-audio-card,name = "Librem 5";
  simple-audio-card,format = "i2s";
  simple-audio-card,widgets =
   "Headphone", "Headphones",
   "Microphone", "Headset Mic",
   "Microphone", "Digital Mic",
   "Speaker", "Speaker";
  simple-audio-card,routing =
   "Headphones", "HPOUTL",
   "Headphones", "HPOUTR",
   "Speaker", "SPKOUTL",
   "Speaker", "SPKOUTR",
   "Headset Mic", "MICBIAS",
   "IN3R", "Headset Mic",
   "DMICDAT", "Digital Mic";
  simple-audio-card,hp-det-gpio = <&gpio3 9 0>;

  simple-audio-card,cpu {
   sound-dai = <&sai2>;
  };

  simple-audio-card,codec {
   sound-dai = <&codec>;
   clocks = <&clk 197>;
   frame-master;
   bitclock-master;
  };
 };

 sound-wwan {
  compatible = "simple-audio-card";
  simple-audio-card,name = "Modem";
  simple-audio-card,format = "i2s";

  simple-audio-card,cpu {
   sound-dai = <&sai6>;
   frame-inversion;
  };

  simple-audio-card,codec {
   sound-dai = <&bm818_codec>;
   frame-master;
   bitclock-master;
  };
 };

 usdhc2_pwrseq: pwrseq {
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_bt>, <&pinctrl_wifi_disable>;
  compatible = "mmc-pwrseq-simple";
  reset-gpios = <&gpio3 25 0>,
         <&gpio4 29 0>;
 };

 bm818_codec: sound-wwan-codec {
  compatible = "broadmobi,bm818", "option,gtm601";
  #sound-dai-cells = <0>;
 };

 vibrator {
  compatible = "pwm-vibrator";
  pwms = <&pwm1 0 1000000000 0>;
  pwm-names = "enable";
  vcc-supply = <&reg_vdd_3v3>;
 };
};

&A53_0 {
 cpu-supply = <&buck2_reg>;
};

&A53_1 {
 cpu-supply = <&buck2_reg>;
};

&A53_2 {
 cpu-supply = <&buck2_reg>;
};

&A53_3 {
 cpu-supply = <&buck2_reg>;
};

&csi1 {
 status = "okay";
};

&ddrc {
 operating-points-v2 = <&ddrc_opp_table>;
 status = "okay";

 ddrc_opp_table: opp-table {
  compatible = "operating-points-v2";

  opp-25000000 {
   opp-hz = /bits/ 64 <25000000>;
  };

  opp-100000000 {
   opp-hz = /bits/ 64 <100000000>;
  };

  opp-166000000 {
   opp-hz = /bits/ 64 <166935483>;
  };

  opp-800000000 {
   opp-hz = /bits/ 64 <800000000>;
  };
 };
};

&dphy {
 status = "okay";
};

&ecspi1 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_ecspi1>;
 cs-gpios = <&gpio5 9 1>;
 #address-cells = <1>;
 #size-cells = <0>;
 status = "okay";

 nor_flash: flash@0 {
  compatible = "jedec,spi-nor";
  reg = <0>;
  spi-max-frequency = <1000000>;
  #address-cells = <1>;
  #size-cells = <1>;

  partition@0 {
   label = "protected0";
   reg = <0x0 0x30000>;
   read-only;
  };

  partition@30000 {
   label = "firmware";
   reg = <0x30000 0x1d0000>;
   read-only;
  };
 };
};

&gpio1 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_pmic_5v>;

 pmic-5v-hog {
  gpio-hog;
  gpios = <1 0>;
  input;
  lane-mapping = "pmic-5v";
 };
};

&iomuxc {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_hog>;

 pinctrl_hog: hoggrp {
  fsl,pins = <

   0x064 0x2CC 0x000 0x6 0x0 0x1f
  >;
 };

 pinctrl_audiopwr: audiopwrgrp {
  fsl,pins = <

   0x038 0x2A0 0x000 0x0 0x0 0x83
  >;
 };

 pinctrl_bl: blgrp {
  fsl,pins = <

   0x12C 0x394 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_bt: btgrp {
  fsl,pins = <

   0x158 0x3C0 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_camera_pwr: camerapwrgrp {
  fsl,pins = <

   0x028 0x290 0x000 0x0 0x0 0x83
  >;
 };

 pinctrl_csi1: csi1grp {
  fsl,pins = <

   0x08C 0x2F4 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_charger_in: chargeringrp {
  fsl,pins = <

   0x100 0x368 0x000 0x5 0x0 0x80
  >;
 };

 pinctrl_dsibiasen: dsibiasengrp {
  fsl,pins = <

   0x078 0x2E0 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_dsien: dsiengrp {
  fsl,pins = <

   0x03C 0x2A4 0x000 0x0 0x0 0x83
  >;
 };

 pinctrl_dsirst: dsirstgrp {
  fsl,pins = <

   0x09C 0x304 0x000 0x5 0x0 0x83

   0x098 0x300 0x000 0x5 0x0 0x83

   0x088 0x2F0 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_ecspi1: ecspigrp {
  fsl,pins = <
   0x1F8 0x460 0x000 0x0 0x0 0x83
   0x1FC 0x464 0x000 0x0 0x0 0x83
   0x200 0x468 0x000 0x5 0x0 0x19
   0x1F4 0x45C 0x000 0x0 0x0 0x83
  >;
 };

 pinctrl_gauge: gaugegrp {
  fsl,pins = <

   0x144 0x3AC 0x000 0x5 0x0 0x80
  >;
 };

 pinctrl_gnsspwr: gnsspwrgrp {
  fsl,pins = <

   0x124 0x38C 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_haptic: hapticgrp {
  fsl,pins = <

   0x1F0 0x458 0x000 0x1 0x0 0x83
  >;
 };

 pinctrl_hp: hpgrp {
  fsl,pins = <

   0x118 0x380 0x000 0x5 0x0 0x180
  >;
 };

 pinctrl_hub_pwr: hubpwrgrp {
  fsl,pins = <

   0x060 0x2C8 0x000 0x0 0x0 0x83
  >;
 };

 pinctrl_i2c1: i2c1grp {
  fsl,pins = <
   0x214 0x47C 0x000 0x0 0x0 0x40000026
   0x218 0x480 0x000 0x0 0x0 0x40000026
  >;
 };

 pinctrl_i2c2: i2c2grp {
  fsl,pins = <
   0x21C 0x484 0x000 0x0 0x0 0x40000026
   0x220 0x488 0x000 0x0 0x0 0x40000026
  >;
 };

 pinctrl_i2c3: i2c3grp {
  fsl,pins = <
   0x224 0x48C 0x000 0x0 0x0 0x40000026
   0x228 0x490 0x000 0x0 0x0 0x40000026
  >;
 };

 pinctrl_i2c4: i2c4grp {
  fsl,pins = <
   0x22C 0x494 0x000 0x0 0x0 0x40000026
   0x230 0x498 0x000 0x0 0x0 0x40000026
  >;
 };

 pinctrl_keys: keysgrp {
  fsl,pins = <

   0x06C 0x2D4 0x000 0x5 0x0 0x01C0

   0x068 0x2D0 0x000 0x5 0x0 0x01C0
  >;
 };

 pinctrl_led_b: ledbgrp {
  fsl,pins = <

   0x05C 0x2C4 0x000 0x5 0x0 0x06
  >;
 };

 pinctrl_led_g: ledggrp {
  fsl,pins = <

   0x1E4 0x44C 0x000 0x1 0x0 0x06
  >;
 };

 pinctrl_led_r: ledrgrp {
  fsl,pins = <

   0x1E8 0x450 0x000 0x1 0x0 0x06
  >;
 };

 pinctrl_mag: maggrp {
  fsl,pins = <

   0x14C 0x3B4 0x000 0x5 0x0 0x80
  >;
 };

 pinctrl_pmic: pmicgrp {
  fsl,pins = <

   0x044 0x2AC 0x000 0x0 0x0 0x80
  >;
 };

 pinctrl_pmic_5v: pmic5vgrp {
  fsl,pins = <

   0x02C 0x294 0x000 0x0 0x0 0x80
  >;
 };

 pinctrl_prox: proxgrp {
  fsl,pins = <

   0x110 0x378 0x000 0x5 0x0 0x80
  >;
 };

 pinctrl_rtc: rtcgrp {
  fsl,pins = <

   0x04C 0x2B4 0x000 0x0 0x0 0x80
  >;
 };

 pinctrl_sai2: sai2grp {
  fsl,pins = <
   0x1C4 0x42C 0x000 0x0 0x0 0xd6
   0x1BC 0x424 0x000 0x0 0x0 0xd6
   0x1C8 0x430 0x000 0x0 0x0 0xd6
   0x1B8 0x420 0x000 0x0 0x0 0xd6
   0x1C0 0x428 0x000 0x0 0x0 0xd6
  >;
 };

 pinctrl_sai6: sai6grp {
  fsl,pins = <
   0x178 0x3E0 0x514 0x2 0x0 0xd6
   0x17C 0x3E4 0x518 0x2 0x0 0xd6
   0x19C 0x404 0x510 0x1 0x1 0xd6
   0x1A0 0x408 0x000 0x2 0x0 0xd6
  >;
 };

 pinctrl_tcpc: tcpcgrp {
  fsl,pins = <

   0x050 0x2B8 0x000 0x0 0x0 0x01C0
  >;
 };

 pinctrl_touch: touchgrp {
  fsl,pins = <

   0x094 0x2FC 0x000 0x5 0x0 0x80
  >;
 };

 pinctrl_typec: typecgrp {
  fsl,pins = <

   0x054 0x2BC 0x000 0x0 0x0 0x83
  >;
 };

 pinctrl_uart1: uart1grp {
  fsl,pins = <
   0x234 0x49C 0x4F4 0x0 0x0 0x49
   0x238 0x4A0 0x000 0x0 0x0 0x49
  >;
 };

 pinctrl_uart2: uart2grp {
  fsl,pins = <
   0x240 0x4A8 0x000 0x0 0x0 0x49
   0x23C 0x4A4 0x4FC 0x0 0x0 0x49
  >;
 };

 pinctrl_uart3: uart3grp {
  fsl,pins = <
   0x244 0x4AC 0x504 0x0 0x2 0x49
   0x248 0x4B0 0x000 0x0 0x0 0x49
  >;
 };

 pinctrl_uart4: uart4grp {
  fsl,pins = <
   0x204 0x46C 0x50C 0x1 0x0 0x49
   0x208 0x470 0x000 0x1 0x0 0x49
   0x20C 0x474 0x000 0x1 0x0 0x49
   0x210 0x478 0x508 0x1 0x1 0x49
  >;
 };

 pinctrl_usdhc1: usdhc1grp {
  fsl,pins = <
   0x0A0 0x308 0x000 0x0 0x0 0x83
   0x0A4 0x30C 0x000 0x0 0x0 0xc3
   0x0A8 0x310 0x000 0x0 0x0 0xc3
   0x0AC 0x314 0x000 0x0 0x0 0xc3
   0x0B0 0x318 0x000 0x0 0x0 0xc3
   0x0B4 0x31C 0x000 0x0 0x0 0xc3
   0x0B8 0x320 0x000 0x0 0x0 0xc3
   0x0BC 0x324 0x000 0x0 0x0 0xc3
   0x0C0 0x328 0x000 0x0 0x0 0xc3
   0x0C4 0x32C 0x000 0x0 0x0 0xc3
   0x0CC 0x334 0x000 0x0 0x0 0x83
   0x0C8 0x330 0x000 0x0 0x0 0xc1
  >;
 };

 pinctrl_usdhc1_100mhz: usdhc1-100mhzgrp {
  fsl,pins = <
   0x0A0 0x308 0x000 0x0 0x0 0x8d
   0x0A4 0x30C 0x000 0x0 0x0 0xcd
   0x0A8 0x310 0x000 0x0 0x0 0xcd
   0x0AC 0x314 0x000 0x0 0x0 0xcd
   0x0B0 0x318 0x000 0x0 0x0 0xcd
   0x0B4 0x31C 0x000 0x0 0x0 0xcd
   0x0B8 0x320 0x000 0x0 0x0 0xcd
   0x0BC 0x324 0x000 0x0 0x0 0xcd
   0x0C0 0x328 0x000 0x0 0x0 0xcd
   0x0C4 0x32C 0x000 0x0 0x0 0xcd
   0x0CC 0x334 0x000 0x0 0x0 0x8d
   0x0C8 0x330 0x000 0x0 0x0 0xc1
  >;
 };

 pinctrl_usdhc1_200mhz: usdhc1-200mhzgrp {
  fsl,pins = <
   0x0A0 0x308 0x000 0x0 0x0 0x9f
   0x0A4 0x30C 0x000 0x0 0x0 0xdf
   0x0A8 0x310 0x000 0x0 0x0 0xdf
   0x0AC 0x314 0x000 0x0 0x0 0xdf
   0x0B0 0x318 0x000 0x0 0x0 0xdf
   0x0B4 0x31C 0x000 0x0 0x0 0xdf
   0x0B8 0x320 0x000 0x0 0x0 0xdf
   0x0BC 0x324 0x000 0x0 0x0 0xdf
   0x0C0 0x328 0x000 0x0 0x0 0xdf
   0x0C4 0x32C 0x000 0x0 0x0 0xdf
   0x0CC 0x334 0x000 0x0 0x0 0x9f
   0x0C8 0x330 0x000 0x0 0x0 0xc1
  >;
 };

 pinctrl_usdhc2: usdhc2grp {
  fsl,pins = <
   0x0D0 0x338 0x000 0x5 0x0 0x80
   0x0D4 0x33C 0x000 0x0 0x0 0x83
   0x0D8 0x340 0x000 0x0 0x0 0xc3
   0x0DC 0x344 0x000 0x0 0x0 0xc3
   0x0E0 0x348 0x000 0x0 0x0 0xc3
   0x0E4 0x34C 0x000 0x0 0x0 0xc3
   0x0E8 0x350 0x000 0x0 0x0 0xc3
   0x0EC 0x354 0x000 0x0 0x0 0xc1
  >;
 };

 pinctrl_usdhc2_100mhz: usdhc2-100mhzgrp {
  fsl,pins = <
   0x0D0 0x338 0x000 0x5 0x0 0x80
   0x0D4 0x33C 0x000 0x0 0x0 0x8d
   0x0D8 0x340 0x000 0x0 0x0 0xcd
   0x0DC 0x344 0x000 0x0 0x0 0xcd
   0x0E0 0x348 0x000 0x0 0x0 0xcd
   0x0E4 0x34C 0x000 0x0 0x0 0xcd
   0x0E8 0x350 0x000 0x0 0x0 0xcd
   0x0EC 0x354 0x000 0x0 0x0 0xc1
  >;
 };

 pinctrl_usdhc2_200mhz: usdhc2-200mhzgrp {
  fsl,pins = <
   0x0D0 0x338 0x000 0x5 0x0 0x80
   0x0D4 0x33C 0x000 0x0 0x0 0x9f
   0x0D8 0x340 0x000 0x0 0x0 0xcf
   0x0DC 0x344 0x000 0x0 0x0 0xcf
   0x0E0 0x348 0x000 0x0 0x0 0xcf
   0x0E4 0x34C 0x000 0x0 0x0 0xcf
   0x0E8 0x350 0x000 0x0 0x0 0xcf
   0x0EC 0x354 0x000 0x0 0x0 0xc1
  >;
 };

 pinctrl_wifi_disable: wifidisablegrp {
  fsl,pins = <

   0x1D0 0x438 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_wifi_pwr: wifipwrgrp {
  fsl,pins = <

   0x11C 0x384 0x000 0x5 0x0 0x83
  >;
 };

 pinctrl_wdog: wdoggrp {
  fsl,pins = <

   0x030 0x298 0x000 0x1 0x0 0x1f
  >;
 };
};

&i2c1 {
 clock-frequency = <384000>;
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_i2c1>;
 status = "okay";

 typec_pd: usb-pd@3f {
  compatible = "ti,tps6598x";
  reg = <0x3f>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_typec>, <&pinctrl_tcpc>;
  interrupt-parent = <&gpio1>;
  interrupts = <10 8>;
  interrupt-names = "irq";

  connector {
   compatible = "usb-c-connector";
   label = "USB-C";
   data-role = "dual";

   ports {
    #address-cells = <1>;
    #size-cells = <0>;

    port@0 {
     reg = <0>;

     usb_con_hs: endpoint {
      remote-endpoint = <&typec_hs>;
     };
    };

    port@1 {
     reg = <1>;

     usb_con_ss: endpoint {
      remote-endpoint = <&typec_ss>;
     };
    };
   };
  };
 };

 pmic: pmic@4b {
  compatible = "rohm,bd71837";
  reg = <0x4b>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_pmic>, <&pinctrl_camera_pwr>;
  clocks = <&pmic_osc>;
  #clock-cells = <0>;
  clock-names = "osc";
  clock-output-names = "pmic_clk";
  interrupt-parent = <&gpio1>;
  interrupts = <7 8>;
  rohm,reset-snvs-powered;

  regulators {
   buck1_reg: BUCK1 {
    regulator-name = "buck1";
    regulator-min-microvolt = <700000>;
    regulator-max-microvolt = <1300000>;
    regulator-boot-on;
    regulator-ramp-delay = <1250>;
    rohm,dvs-run-voltage = <880000>;
    rohm,dvs-idle-voltage = <820000>;
    rohm,dvs-suspend-voltage = <810000>;
    regulator-always-on;
   };

   buck2_reg: BUCK2 {
    regulator-name = "buck2";
    regulator-min-microvolt = <700000>;
    regulator-max-microvolt = <1300000>;
    regulator-boot-on;
    regulator-ramp-delay = <1250>;
    rohm,dvs-run-voltage = <950000>;
    rohm,dvs-idle-voltage = <850000>;
    regulator-always-on;
   };

   buck3_reg: BUCK3 {
    regulator-name = "buck3";
    regulator-min-microvolt = <700000>;
    regulator-max-microvolt = <1300000>;
    regulator-boot-on;
    rohm,dvs-run-voltage = <850000>;
   };

   buck4_reg: BUCK4 {
    regulator-name = "buck4";
    regulator-min-microvolt = <700000>;
    regulator-max-microvolt = <1300000>;
    rohm,dvs-run-voltage = <930000>;
   };

   buck5_reg: BUCK5 {
    regulator-name = "buck5";
    regulator-min-microvolt = <700000>;
    regulator-max-microvolt = <1350000>;
    regulator-boot-on;
    regulator-always-on;
   };

   buck6_reg: BUCK6 {
    regulator-name = "buck6";
    regulator-min-microvolt = <3000000>;
    regulator-max-microvolt = <3300000>;
    regulator-boot-on;
    regulator-always-on;
   };

   buck7_reg: BUCK7 {
    regulator-name = "buck7";
    regulator-min-microvolt = <1605000>;
    regulator-max-microvolt = <1995000>;
    regulator-boot-on;
    regulator-always-on;
   };

   buck8_reg: BUCK8 {
    regulator-name = "buck8";
    regulator-min-microvolt = <800000>;
    regulator-max-microvolt = <1400000>;
    regulator-boot-on;
    regulator-always-on;
   };

   ldo1_reg: LDO1 {
    regulator-name = "ldo1";
    regulator-min-microvolt = <3000000>;
    regulator-max-microvolt = <3300000>;
    regulator-boot-on;

    regulator-always-on;
   };

   ldo2_reg: LDO2 {
    regulator-name = "ldo2";
    regulator-min-microvolt = <900000>;
    regulator-max-microvolt = <900000>;
    regulator-boot-on;

    regulator-always-on;
   };

   ldo3_reg: LDO3 {
    regulator-name = "ldo3";
    regulator-min-microvolt = <1800000>;
    regulator-max-microvolt = <3300000>;
    regulator-boot-on;
    regulator-always-on;
   };

   ldo4_reg: LDO4 {
    regulator-name = "ldo4";
    regulator-min-microvolt = <900000>;
    regulator-max-microvolt = <1800000>;
    regulator-boot-on;
    regulator-always-on;
   };

   ldo5_reg: LDO5 {

    regulator-name = "ldo5";
    regulator-min-microvolt = <1800000>;
    regulator-max-microvolt = <3300000>;
    regulator-always-on;
   };

   ldo6_reg: LDO6 {

    regulator-name = "ldo6";
    regulator-min-microvolt = <900000>;
    regulator-max-microvolt = <1800000>;
    regulator-boot-on;
    regulator-always-on;
   };

   ldo7_reg: LDO7 {

    regulator-name = "ldo7";
    regulator-min-microvolt = <1800000>;
    regulator-max-microvolt = <3300000>;
    regulator-boot-on;
    regulator-always-on;
   };
  };
 };

 rtc@68 {
  compatible = "microcrystal,rv4162";
  reg = <0x68>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_rtc>;
  interrupt-parent = <&gpio1>;
  interrupts = <9 8>;
 };
};

&i2c2 {
 clock-frequency = <384000>;
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_i2c2>;
 status = "okay";

 magnetometer: magnetometer@1e {
  compatible = "st,lsm9ds1-magn";
  reg = <0x1e>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_mag>;
  interrupt-parent = <&gpio3>;
  interrupts = <22 4>;
  vdd-supply = <&reg_vdd_sen>;
  vddio-supply = <&reg_vdd_1v8>;
 };

 regulator@3e {
  compatible = "tps65132";
  reg = <0x3e>;

  reg_lcd_avdd: outp {
   regulator-name = "LCD_AVDD";
   vin-supply = <&reg_lcd_3v4>;
  };

  reg_lcd_avee: outn {
   regulator-name = "LCD_AVEE";
   vin-supply = <&reg_lcd_3v4>;
  };
 };

 proximity: prox@60 {
  compatible = "vishay,vcnl4040";
  reg = <0x60>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_prox>;
  interrupt-parent = <&gpio3>;
  interrupts = <7 8>;
 };

 accel_gyro: accel-gyro@6a {
  compatible = "st,lsm9ds1-imu";
  reg = <0x6a>;
  vdd-supply = <&reg_vdd_sen>;
  vddio-supply = <&reg_vdd_1v8>;
 };
};

&i2c3 {
 clock-frequency = <384000>;
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_i2c3>;
 status = "okay";

 codec: audio-codec@1a {
  compatible = "wlf,wm8962";
  reg = <0x1a>;
  clocks = <&clk 197>;
  assigned-clocks = <&clk 130>;
  assigned-clock-parents = <&clk 27>;
  assigned-clock-rates = <24576000>;
  #sound-dai-cells = <0>;
  mic-cfg = <0x200>;
  DCVDD-supply = <&reg_aud_1v8>;
  DBVDD-supply = <&reg_aud_1v8>;
  AVDD-supply = <&reg_aud_1v8>;
  CPVDD-supply = <&reg_aud_1v8>;
  MICVDD-supply = <&reg_mic_2v4>;
  PLLVDD-supply = <&reg_aud_1v8>;
  SPKVDD1-supply = <&reg_vsys_3v4>;
  SPKVDD2-supply = <&reg_vsys_3v4>;
  gpio-cfg = <
   0x0000
   0x0001
   0x0013
   0x0000
   0x8014
   0x0000
  >;
 };

 camera_front: camera@20 {
  compatible = "hynix,hi846";
  reg = <0x20>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_csi1>;
  clocks = <&clk 255>;
  assigned-clocks = <&clk 255>;
  assigned-clock-rates = <25000000>;
  reset-gpios = <&gpio1 25 1>;
  vdda-supply = <&reg_vcam_2v8>;
  vddd-supply = <&reg_vcam_1v2>;
  vddio-supply = <&reg_csi_1v8>;
  rotation = <90>;
  orientation = <0>;

  port {
   camera1_ep: endpoint {
    data-lanes = <1 2>;
    link-frequencies = /bits/ 64
     <80000000 200000000 300000000>;
    remote-endpoint = <&mipi1_sensor_ep>;
   };
  };
 };

 backlight@36 {
  compatible = "ti,lm36922";
  reg = <0x36>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_bl>;
  #address-cells = <1>;
  #size-cells = <0>;
  enable-gpios = <&gpio3 14 0>;
  vled-supply = <&reg_vsys_3v4>;
  ti,ovp-microvolt = <25000000>;

  led_backlight: led@0 {
   reg = <0>;
   label = ":backlight";
   linux,default-trigger = "backlight";
   led-max-microamp = <20000>;
  };
 };

 touchscreen@38 {
  compatible = "edt,edt-ft5506";
  reg = <0x38>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_touch>;
  interrupt-parent = <&gpio1>;
  interrupts = <27 2>;
  touchscreen-size-x = <720>;
  touchscreen-size-y = <1440>;
  vcc-supply = <&reg_lcd_1v8>;
 };
};

&i2c4 {
 clock-frequency = <384000>;
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_i2c4>;
 status = "okay";

 vcm@c {
  compatible = "dongwoon,dw9714";
  reg = <0x0c>;
  vcc-supply = <&reg_csi_1v8>;
 };

 bat: fuel-gauge@36 {
  compatible = "maxim,max17055";
  reg = <0x36>;
  interrupt-parent = <&gpio3>;
  interrupts = <20 8>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_gauge>;
  power-supplies = <&bq25895>;
  maxim,over-heat-temp = <700>;
  maxim,over-volt = <4500>;
  maxim,rsns-microohm = <5000>;
 };

 bq25895: charger@6a {
  compatible = "ti,bq25895", "ti,bq25890";
  reg = <0x6a>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_charger_in>;
  interrupt-parent = <&gpio3>;
  interrupts = <3 2>;
  phys = <&usb3_phy0>;
  ti,battery-regulation-voltage = <4208000>;
  ti,termination-current = <128000>;
  ti,precharge-current = <128000>;
  ti,minimum-sys-voltage = <3700000>;
  ti,boost-voltage = <5000000>;
  ti,boost-max-current = <1500000>;
  ti,use-vinmin-threshold = <1>;
  ti,vinmin-threshold = <3900000>;
  monitored-battery = <&bat>;
  power-supplies = <&typec_pd>;
 };
};

&lcdif {
 status = "okay";
};

&mipi_csi1 {
 assigned-clock-rates = <266000000>, <200000000>, <66000000>;
 status = "okay";

 ports {
  port@0 {
   reg = <0>;

   mipi1_sensor_ep: endpoint {
    remote-endpoint = <&camera1_ep>;
    data-lanes = <1 2>;
   };
  };
 };
};

&mipi_dsi {
 #address-cells = <1>;
 #size-cells = <0>;
 status = "okay";

 lcd_panel: panel@0 {
  compatible = "mantix,mlaf057we51-x";
  reg = <0>;
  pinctrl-names = "default";
  pinctrl-0 = <&pinctrl_dsirst>;
  avdd-supply = <&reg_lcd_avdd>;
  avee-supply = <&reg_lcd_avee>;
  vddi-supply = <&reg_lcd_1v8>;
  backlight = <&backlight_dsi>;
  reset-gpios = <&gpio1 29 1>;
  mantix,tp-rstn-gpios = <&gpio1 24 1>;

  port {
   panel_in: endpoint {
    remote-endpoint = <&mipi_dsi_out>;
   };
  };
 };

 ports {
  port@1 {
   reg = <1>;

   mipi_dsi_out: endpoint {
    remote-endpoint = <&panel_in>;
   };
  };
 };
};

&pgc_gpu {
 power-supply = <&buck3_reg>;
};

&pgc_mipi {
 power-supply = <&ldo5_reg>;
};

&pgc_vpu {
 power-supply = <&buck4_reg>;
};

&pwm1 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_haptic>;
 status = "okay";
};

&pwm2 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_led_b>;
 status = "okay";
};

&pwm3 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_led_r>;
 status = "okay";
};

&pwm4 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_led_g>;
 status = "okay";
};

&sai2 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_sai2>;
 assigned-clocks = <&clk 130>;
 assigned-clock-parents = <&clk 27>;
 assigned-clock-rates = <24576000>;
 status = "okay";
};

&sai6 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_sai6>;
 assigned-clocks = <&clk 134>;
 assigned-clock-parents = <&clk 27>;
 assigned-clock-rates = <24576000>;
 fsl,sai-synchronous-rx;
 status = "okay";
};

&snvs_pwrkey {
 status = "okay";
};

&snvs_rtc {
 status = "disabled";
};

&uart1 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_uart1>;
 status = "okay";
};

&uart2 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_uart2>;
 status = "okay";

 gnss {
  compatible = "globaltop,pa6h";
  vcc-supply = <&reg_gnss>;
  current-speed = <9600>;
 };
};

&uart3 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_uart3>;
 status = "okay";
};

&uart4 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_uart4>;
 uart-has-rtscts;
 status = "okay";
};

&usb3_phy0 {
 status = "okay";
};

&usb3_phy1 {
 vbus-supply = <&reg_hub>;
 status = "okay";
};

&usb_dwc3_0 {
 #address-cells = <1>;
 #size-cells = <0>;
 dr_mode = "otg";
 usb-role-switch;
 status = "okay";

 port@0 {
  reg = <0>;

  typec_hs: endpoint {
   remote-endpoint = <&usb_con_hs>;
  };
 };

 port@1 {
  reg = <1>;

  typec_ss: endpoint {
   remote-endpoint = <&usb_con_ss>;
  };
 };
};

&usb_dwc3_1 {
 dr_mode = "host";
 status = "okay";
 #address-cells = <1>;
 #size-cells = <0>;


 hub@1 {
  compatible = "usb424,2640";
  reg = <1>;
  #address-cells = <1>;
  #size-cells = <0>;

  mass-storage@1 {
   compatible = "usb424,4041";
   reg = <1>;
  };
 };
};

&usdhc1 {
 assigned-clocks = <&clk 142>;
 assigned-clock-rates = <400000000>;
 pinctrl-names = "default", "state_100mhz", "state_200mhz";
 pinctrl-0 = <&pinctrl_usdhc1>;
 pinctrl-1 = <&pinctrl_usdhc1_100mhz>;
 pinctrl-2 = <&pinctrl_usdhc1_200mhz>;
 bus-width = <8>;
 vmmc-supply = <&reg_vdd_3v3>;
 power-supply = <&reg_vdd_1v8>;
 non-removable;
 status = "okay";
};

&usdhc2 {
 assigned-clocks = <&clk 143>;
 assigned-clock-rates = <200000000>;
 pinctrl-names = "default", "state_100mhz", "state_200mhz";
 pinctrl-0 = <&pinctrl_usdhc2>;
 pinctrl-1 = <&pinctrl_usdhc2_100mhz>;
 pinctrl-2 = <&pinctrl_usdhc2_200mhz>;
 bus-width = <4>;
 vmmc-supply = <&reg_wifi_3v3>;
 mmc-pwrseq = <&usdhc2_pwrseq>;
 post-power-on-delay-ms = <1000>;
 cd-gpios = <&gpio2 12 1>;
 max-frequency = <100000000>;
 disable-wp;
 cap-sdio-irq;
 keep-power-in-suspend;
 wakeup-source;
 status = "okay";
};

&wdog1 {
 pinctrl-names = "default";
 pinctrl-0 = <&pinctrl_wdog>;
 fsl,ext-reset-output;
 status = "okay";
};

&a53_opp_table {
 opp-1000000000 {
  opp-microvolt = <850000>;
 };

 opp-1500000000 {
  opp-microvolt = <950000>;
 };
};
# 12 "arch/arm64/boot/dts/freescale/imx8mq-librem5-r3.dtsi" 2

/ {
 model = "Purism Librem 5r3";
 compatible = "purism,librem5r3", "purism,librem5", "fsl,imx8mq";
};

&accel_gyro {
 mount-matrix = "1", "0", "0",
   "0", "1", "0",
   "0", "0", "-1";
};

&bq25895 {
 ti,charge-current = <1500000>;
};

&camera_front {
 pinctrl-0 = <&pinctrl_csi1>, <&pinctrl_r3_camera_pwr>;
 shutdown-gpios = <&gpio5 4 1>;
};

&iomuxc {
 pinctrl_r3_camera_pwr: r3camerapwrgrp {
  fsl,pins = <
   0x1EC 0x454 0x000 0x5 0x0 0x83
  >;
 };
};

&magnetometer {
 mount-matrix = "1", "0", "0",
   "0", "-1", "0",
   "0", "0", "-1";
};

&proximity {
 proximity-near-level = <10>;
};
# 7 "arch/arm64/boot/dts/freescale/imx8mq-librem5-r4.dts" 2

/ {
 model = "Purism Librem 5r4";
 compatible = "purism,librem5r4", "purism,librem5", "fsl,imx8mq";
};

&bat {
 maxim,rsns-microohm = <1667>;
};

&led_backlight {
 led-max-microamp = <25000>;
};

&lcd_panel {
 compatible = "ys,ys57pss36bh5gq";
};

&proximity {
 proximity-near-level = <5>;
};
